# ğŸ–¥ï¸ å¤šæ˜¾ç¤ºå™¨è°ƒè¯•æŒ‡å—

## é—®é¢˜ï¼šåæ ‡è¶…å‡ºå±å¹•èŒƒå›´

### é”™è¯¯ä¿¡æ¯
```
âŒ æ‰§è¡Œå¤±è´¥
{ "success": false, "error": "Coordinates out of screen bounds" }
```

## âœ… å·²ä¿®å¤

æˆ‘å·²ç»ä¿®å¤äº†åæ ‡éªŒè¯é€»è¾‘ï¼š
- âœ… ç°åœ¨æ£€æŸ¥æ‰€æœ‰æ˜¾ç¤ºå™¨çš„èŒƒå›´
- âœ… æ˜¾ç¤ºæ¯ä¸ªæ˜¾ç¤ºå™¨çš„åæ ‡èŒƒå›´
- âœ… å³ä½¿åæ ‡çœ‹èµ·æ¥è¶…å‡ºèŒƒå›´ï¼Œä¹Ÿä¼šå°è¯•ç‚¹å‡»

## ğŸ” è°ƒè¯•æ­¥éª¤

### 1. é‡å¯æœåŠ¡

**é‡è¦**ï¼šå¿…é¡»é‡å¯æœåŠ¡æ‰èƒ½åº”ç”¨ä¿®å¤ï¼

```bash
# æŒ‰ Ctrl+C åœæ­¢å½“å‰æœåŠ¡

# é‡æ–°å¯åŠ¨
cd /Users/ann/Desktop/gitlab/fish/py-picToWork/backend
source venv/bin/activate
python main.py
```

### 2. æŸ¥çœ‹æ˜¾ç¤ºå™¨ä¿¡æ¯

è®¿é—® API ç«¯ç‚¹æŸ¥çœ‹ç³»ç»Ÿæ£€æµ‹åˆ°çš„æ˜¾ç¤ºå™¨ï¼š

```bash
curl http://localhost:8899/api/monitors
```

**é¢„æœŸè¾“å‡º**ï¼š
```json
{
  "success": true,
  "count": 2,
  "monitors": [
    {
      "id": 1,
      "name": "æ˜¾ç¤ºå™¨ 1",
      "width": 1920,
      "height": 1080,
      "left": 0,
      "top": 0
    },
    {
      "id": 2,
      "name": "æ˜¾ç¤ºå™¨ 2",
      "width": 2560,
      "height": 1440,
      "left": 1920,
      "top": 0
    }
  ]
}
```

### 3. æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—

é‡æ–°ä¸Šä¼ å›¾ç‰‡å¹¶æ‰§è¡Œï¼Œç°åœ¨ä¼šçœ‹åˆ°è¯¦ç»†ä¿¡æ¯ï¼š

```
ğŸ–¥ï¸ æ£€æµ‹åˆ° 2 ä¸ªæ˜¾ç¤ºå™¨: æ˜¾ç¤ºå™¨1(1920x1080), æ˜¾ç¤ºå™¨2(2560x1440)
ğŸ” å¼€å§‹è¯†åˆ«å±å¹• (ç½®ä¿¡åº¦: 0.8)
âœ… æ‰¾åˆ°ç›®æ ‡å›¾ç‰‡ï¼åŒ¹é…åº¦: 92% (æ˜¾ç¤ºå™¨ 2)
ğŸ” åæ ‡è¯¦æƒ…: ç»å¯¹(2500, 500), ç›¸å¯¹(580, 500), æ˜¾ç¤ºå™¨åç§»(1920, 0)
ğŸ“º æ˜¾ç¤ºå™¨èŒƒå›´: æ˜¾ç¤ºå™¨1[0,0-1920,1080], æ˜¾ç¤ºå™¨2[1920,0-4480,1440]
âœ… åæ ‡åœ¨æ˜¾ç¤ºå™¨2èŒƒå›´å†…
ğŸ–±ï¸ å‡†å¤‡ç‚¹å‡»åæ ‡: (2500, 500)
âœ… ç‚¹å‡»æˆåŠŸï¼
```

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šæ˜¾ç¤ºå™¨æ•°é‡ä¸å¯¹

**ç—‡çŠ¶**ï¼šåªæ£€æµ‹åˆ°1ä¸ªæ˜¾ç¤ºå™¨ï¼Œä½†å®é™…æœ‰2ä¸ª

**åŸå› **ï¼š
- æ‰©å±•å±æœªæ­£ç¡®é…ç½®
- é•œåƒæ¨¡å¼è€Œéæ‰©å±•æ¨¡å¼

**è§£å†³**ï¼š
```
macOS: ç³»ç»Ÿè®¾ç½® â†’ æ˜¾ç¤ºå™¨ â†’ æ’åˆ—
ç¡®ä¿ï¼š
- æœªå‹¾é€‰"é•œåƒæ˜¾ç¤ºå™¨"
- æ˜¾ç¤ºå™¨å›¾æ ‡åˆ†å¼€æ’åˆ—
```

### é—®é¢˜2ï¼šåæ ‡ä»ç„¶è¶…å‡ºèŒƒå›´

**å¯èƒ½åŸå› Aï¼šæ˜¾ç¤ºå™¨åç§»è®¡ç®—é”™è¯¯**

æ£€æŸ¥æ—¥å¿—ä¸­çš„æ˜¾ç¤ºå™¨èŒƒå›´ï¼š
```
ğŸ“º æ˜¾ç¤ºå™¨èŒƒå›´: æ˜¾ç¤ºå™¨1[0,0-1920,1080], æ˜¾ç¤ºå™¨2[1920,0-4480,1440]
```

å¦‚æœåæ ‡æ˜¯ `(2500, 500)`ï¼Œåº”è¯¥åœ¨æ˜¾ç¤ºå™¨2çš„èŒƒå›´å†…ï¼š
- X: 1920 â‰¤ 2500 â‰¤ 4480 âœ…
- Y: 0 â‰¤ 500 â‰¤ 1440 âœ…

**å¯èƒ½åŸå› Bï¼šmacOS åæ ‡ç³»ç»Ÿé—®é¢˜**

macOS çš„åæ ‡ç³»ç»Ÿå¯èƒ½ä¸å…¶ä»–ç³»ç»Ÿä¸åŒã€‚æ£€æŸ¥ï¼š

```python
# åœ¨ Python ä¸­æµ‹è¯•
import pyautogui
import mss

# è·å– PyAutoGUI çœ‹åˆ°çš„å±å¹•å¤§å°
print("PyAutoGUI screen size:", pyautogui.size())

# è·å– MSS çœ‹åˆ°çš„æ‰€æœ‰æ˜¾ç¤ºå™¨
with mss.mss() as sct:
    for i, monitor in enumerate(sct.monitors):
        print(f"Monitor {i}:", monitor)
```

### é—®é¢˜3ï¼šæ‰¾åˆ°å›¾ç‰‡ä½†ç‚¹å‡»å¤±è´¥

**ç—‡çŠ¶**ï¼šæ—¥å¿—æ˜¾ç¤ºæ‰¾åˆ°å›¾ç‰‡ï¼Œä½†ç‚¹å‡»æ²¡ååº”

**åŸå› **ï¼š
- è¾…åŠ©åŠŸèƒ½æƒé™ä¸è¶³
- PyAutoGUI åœ¨å¤šæ˜¾ç¤ºå™¨ç¯å¢ƒä¸‹çš„é™åˆ¶

**è§£å†³æ–¹æ¡ˆAï¼šæ£€æŸ¥æƒé™**
```
ç³»ç»Ÿè®¾ç½® â†’ éšç§ä¸å®‰å…¨æ€§ â†’ è¾…åŠ©åŠŸèƒ½
ç¡®ä¿å‹¾é€‰ï¼š
- âœ… ç»ˆç«¯
- âœ… Pythonï¼ˆå¦‚æœæœ‰ï¼‰
```

**è§£å†³æ–¹æ¡ˆBï¼šä½¿ç”¨ç›¸å¯¹åæ ‡**

å¦‚æœç»å¯¹åæ ‡æœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨æ˜¾ç¤ºå™¨å†…çš„ç›¸å¯¹åæ ‡ã€‚

ä¿®æ”¹ `backend/main.py`ï¼š
```python
# å°è¯•ä½¿ç”¨ç›¸å¯¹åæ ‡
local_x = location.get('local_x')
local_y = location.get('local_y')
monitor_id = location.get('monitor_id')

# å¦‚æœæ˜¯ç¬¬äºŒä¸ªæ˜¾ç¤ºå™¨ï¼Œå¯èƒ½éœ€è¦ç‰¹æ®Šå¤„ç†
if monitor_id > 1:
    # æ–¹æ¡ˆ1ï¼šä½¿ç”¨ç»å¯¹åæ ‡ï¼ˆå½“å‰æ–¹å¼ï¼‰
    pyautogui.moveTo(x, y)
    
    # æ–¹æ¡ˆ2ï¼šå…ˆç§»åŠ¨åˆ°æ˜¾ç¤ºå™¨èµ·ç‚¹ï¼Œå†ç§»åŠ¨ç›¸å¯¹åæ ‡
    # monitor = get_all_monitors()[monitor_id - 1]
    # pyautogui.moveTo(monitor['left'] + local_x, monitor['top'] + local_y)
```

## ğŸ”§ ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

å¦‚æœå¤šæ˜¾ç¤ºå™¨ä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ä¸´æ—¶åªåœ¨ä¸»æ˜¾ç¤ºå™¨ä¸Šå·¥ä½œï¼š

### æ–¹æ¡ˆ1ï¼šç§»åŠ¨çª—å£åˆ°ä¸»æ˜¾ç¤ºå™¨

å°†ç›®æ ‡åº”ç”¨çª—å£æ‹–åˆ°ä¸»æ˜¾ç¤ºå™¨ï¼ˆæ˜¾ç¤ºå™¨1ï¼‰ã€‚

### æ–¹æ¡ˆ2ï¼šæŒ‡å®šæœç´¢æ˜¾ç¤ºå™¨

æœªæ¥ç‰ˆæœ¬ä¼šæ”¯æŒé€‰æ‹©ç‰¹å®šæ˜¾ç¤ºå™¨æœç´¢ã€‚

### æ–¹æ¡ˆ3ï¼šç¦ç”¨æ‰©å±•å±æµ‹è¯•

ä¸´æ—¶æ–­å¼€æˆ–ç¦ç”¨æ‰©å±•å±ï¼Œç¡®è®¤å•æ˜¾ç¤ºå™¨ç¯å¢ƒä¸‹æ˜¯å¦æ­£å¸¸ã€‚

## ğŸ“Š æ”¶é›†è°ƒè¯•ä¿¡æ¯

å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

### 1. æ˜¾ç¤ºå™¨é…ç½®

```bash
curl http://localhost:8899/api/monitors | python3 -m json.tool
```

### 2. å®Œæ•´æ—¥å¿—

ä¸Šä¼ å›¾ç‰‡å¹¶æ‰§è¡Œåï¼Œå¤åˆ¶æ‰€æœ‰æ—¥å¿—è¾“å‡ºã€‚

### 3. ç³»ç»Ÿä¿¡æ¯

```bash
# macOSç‰ˆæœ¬
sw_vers

# å±å¹•åˆ†è¾¨ç‡
system_profiler SPDisplaysDataType | grep Resolution

# Pythonç‰ˆæœ¬
python --version

# PyAutoGUIç‰ˆæœ¬
pip show pyautogui | grep Version
```

### 4. æµ‹è¯•è„šæœ¬è¾“å‡º

åˆ›å»ºæµ‹è¯•è„šæœ¬ `test_coordinates.py`ï¼š

```python
import pyautogui
import mss

print("=== PyAutoGUI Info ===")
print(f"Screen size: {pyautogui.size()}")
print(f"Position: {pyautogui.position()}")

print("\n=== MSS Monitors ===")
with mss.mss() as sct:
    for i, monitor in enumerate(sct.monitors):
        print(f"Monitor {i}: {monitor}")

print("\n=== Test Movement ===")
try:
    current_pos = pyautogui.position()
    print(f"Current position: {current_pos}")
    
    # æµ‹è¯•ç§»åŠ¨åˆ°ä¸åŒä½ç½®
    test_positions = [
        (100, 100),
        (1000, 500),
        (2000, 500) if pyautogui.size()[0] < 2000 else (1000, 500)
    ]
    
    for pos in test_positions:
        try:
            pyautogui.moveTo(pos[0], pos[1], duration=0.5)
            actual_pos = pyautogui.position()
            print(f"Moved to {pos}, actual: {actual_pos}")
        except Exception as e:
            print(f"Failed to move to {pos}: {e}")
    
    # æ¢å¤åŸä½ç½®
    pyautogui.moveTo(current_pos[0], current_pos[1])
    
except Exception as e:
    print(f"Error: {e}")
```

è¿è¡Œï¼š
```bash
cd /Users/ann/Desktop/gitlab/fish/py-picToWork/backend
source venv/bin/activate
python test_coordinates.py
```

## ğŸ¯ é¢„æœŸè¡Œä¸º

ä¿®å¤åçš„è¡Œä¸ºï¼š

1. **æ£€æµ‹æ˜¾ç¤ºå™¨**
   ```
   ğŸ–¥ï¸ æ£€æµ‹åˆ° 2 ä¸ªæ˜¾ç¤ºå™¨: æ˜¾ç¤ºå™¨1(1920x1080), æ˜¾ç¤ºå™¨2(2560x1440)
   ```

2. **æœç´¢æ‰€æœ‰æ˜¾ç¤ºå™¨**
   ```
   ğŸ“º å„æ˜¾ç¤ºå™¨åŒ¹é…åº¦: æ˜¾ç¤ºå™¨1: 45%, æ˜¾ç¤ºå™¨2: 92%
   ```

3. **éªŒè¯åæ ‡**
   ```
   ğŸ“º æ˜¾ç¤ºå™¨èŒƒå›´: æ˜¾ç¤ºå™¨1[0,0-1920,1080], æ˜¾ç¤ºå™¨2[1920,0-4480,1440]
   âœ… åæ ‡åœ¨æ˜¾ç¤ºå™¨2èŒƒå›´å†…
   ```

4. **æ‰§è¡Œç‚¹å‡»**
   ```
   ğŸ–±ï¸ å‡†å¤‡ç‚¹å‡»åæ ‡: (2500, 500)
   âœ… ç‚¹å‡»æˆåŠŸï¼ä½ç½®: (2500, 500)
   ```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»ç„¶æœ‰é—®é¢˜ï¼š

1. âœ… ç¡®è®¤å·²é‡å¯æœåŠ¡
2. âœ… æ”¶é›†ä¸Šè¿°è°ƒè¯•ä¿¡æ¯
3. âœ… æä¾›å®Œæ•´æ—¥å¿—è¾“å‡º
4. âœ… è¿è¡Œæµ‹è¯•è„šæœ¬

---

**æ›´æ–°æ—¶é—´**: 2025-10-10  
**ç‰ˆæœ¬**: v1.1.1  
**ä¿®å¤å†…å®¹**: å¤šæ˜¾ç¤ºå™¨åæ ‡éªŒè¯é€»è¾‘
