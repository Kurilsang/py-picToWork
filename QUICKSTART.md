# ⚡ 快速开始指南

## 🎯 5 分钟上手

### 第 1 步：启动服务

**方式一：使用启动脚本（推荐）**
```bash
./start.sh
```

**方式二：手动启动**
```bash
cd backend
source venv/bin/activate
python main.py
```

### 第 2 步：打开浏览器

访问：http://localhost:8899

你会看到一个漂亮的界面，包含：
- 左侧：图片上传和控制面板
- 右侧：实时日志输出

### 第 3 步：准备目标图片

1. **截取目标元素**
   - macOS: `Cmd + Shift + 4`
   - Windows: `Win + Shift + S`
   
2. **截图建议**
   - 清晰、完整地截取目标按钮或元素
   - 不要包含太多周围内容
   - 建议大小：50x50 到 300x300 像素
   - 保存为 PNG 或 JPG

### 第 4 步：上传并执行

1. 在网页中点击上传区域或直接拖拽图片
2. 看到图片预览后，调整置信度（建议 0.8）
3. 点击 "🚀 识别并点击" 按钮
4. 观察右侧日志输出

## 🎬 完整演示

### 示例：自动点击"确定"按钮

1. **准备阶段**
   ```
   打开一个包含"确定"按钮的对话框
   使用截图工具截取"确定"按钮
   ```

2. **上传图片**
   ```
   在 py-picToWork 界面上传刚才的截图
   ```

3. **执行识别**
   ```
   点击"识别并点击"
   观察日志：
   - 📁 图片已保存
   - 🔍 开始识别屏幕
   - ✅ 找到目标图片！匹配度: 95%
   - 🖱️ 准备点击坐标: (500, 300)
   - ✅ 点击成功！
   ```

## 📊 界面说明

### 左侧面板

**上传区域**
- 点击或拖拽上传图片
- 支持 PNG、JPG 格式

**图片预览**
- 显示上传的图片
- 显示文件名

**设置**
- **置信度**：0.0-1.0，默认 0.8
  - 越高越精确，但可能找不到
  - 越低越宽松，但可能误识别

**控制按钮**
- 🚀 识别并点击：执行识别和点击
- 🗑️ 清空：清除当前选择

### 右侧面板

**连接状态**
- ● 已连接：WebSocket 连接正常
- ● 未连接：WebSocket 断开

**日志输出**
- 🔵 info：普通信息
- 🟢 success：成功操作
- 🟡 warning：警告信息
- 🔴 error：错误信息

## 🛠️ 故障排除

### 问题 1：服务启动失败

**检查：**
```bash
# 查看 Python 版本
python3 --version
# 应该是 3.8 或更高

# 检查依赖是否安装
cd backend
source venv/bin/activate
pip list | grep fastapi
```

**解决：**
```bash
# 重新安装依赖
cd backend
source venv/bin/activate
pip install -r requirements.txt
```

### 问题 2：未找到目标图片

**可能原因：**
- 置信度设置过高
- 目标元素不在屏幕上
- 截图与当前显示有差异

**解决：**
1. 降低置信度到 0.7 或更低
2. 确保目标元素在屏幕上可见
3. 重新截取当前屏幕的目标图片

### 问题 3：WebSocket 未连接

**解决：**
1. 刷新浏览器页面
2. 检查控制台是否有错误
3. 重启后端服务

### 问题 4：macOS 点击无效

**原因：**
没有授予辅助功能权限

**解决：**
1. 打开"系统设置"
2. 进入"隐私与安全性" → "辅助功能"
3. 点击 "+" 添加"终端"
4. 重启服务

## ⚙️ 高级用法

### 调整鼠标移动速度

编辑 `backend/main.py`，找到：
```python
pyautogui.moveTo(x, y, duration=0.5)
```

修改 `duration` 值（秒）：
- 0.1：快速移动
- 0.5：正常速度（默认）
- 1.0：慢速移动

### 修改服务端口

在 `backend/main.py` 顶部修改：
```python
PORT = 8899  # 改为其他端口，如 8080, 9090 等
```

### 查看更多日志

启动时添加详细日志：
```bash
cd backend
source venv/bin/activate
python main.py --log-level debug
```

## 📝 使用技巧

### 技巧 1：提高识别准确率

1. **清晰截图**：截取高质量的目标图片
2. **适当范围**：不要包含过多周围内容
3. **固定元素**：选择不经常变化的元素
4. **合适置信度**：根据元素特征调整

### 技巧 2：测试置信度

先从高置信度开始（0.9），如果找不到，逐步降低：
- 0.9 → 找不到
- 0.8 → 找不到
- 0.7 → 找到了！

### 技巧 3：处理多个相同按钮

如果屏幕上有多个相同的按钮，系统会点击第一个找到的（置信度最高的）。

解决方案：
- 截取更多上下文，让目标更独特
- 或者截取整个按钮区域包括周围的文字

## 🔧 调试模式

### 查看截图

在 `backend/main.py` 中，可以保存识别的截图：

```python
# 在 find_image_on_screen 函数中添加
cv2.imwrite('debug_screenshot.png', screenshot)
cv2.imwrite('debug_template.png', template)
```

### 查看匹配结果

```python
# 保存匹配热力图
plt.imshow(result, cmap='hot')
plt.savefig('match_result.png')
```

## 🚀 下一步

### 尝试更多功能

1. **自动化表单填写**
   - 识别并点击输入框
   - 添加键盘输入功能

2. **创建工作流**
   - 依次识别多个目标
   - 实现连续操作

3. **集成到脚本**
   - 使用 API 调用
   - 自动化批量任务

### 完整版功能

当前是 MVP 版本，完整版将包括：

- 🎨 可视化工作流编辑器
- 🔄 循环和条件判断
- 💾 工作流保存和加载
- 📊 执行历史记录
- 🖥️ 多显示器支持
- ⌨️ 键盘操作
- 📝 更多操作类型

详见 [README.md](README.md)

## 📞 获取帮助

- 📖 详细文档：[MVP_README.md](MVP_README.md)
- 🔧 开发指南：[docs/DEVELOPMENT.md](docs/DEVELOPMENT.md)
- 📡 API 文档：http://localhost:8899/docs

## ✅ 检查清单

启动前确认：
- [ ] Python 3.8+ 已安装
- [ ] 依赖已安装（运行 ./start.sh 自动安装）
- [ ] macOS 已授予辅助功能权限
- [ ] 已准备好目标图片

---

**快速启动**: `./start.sh` → http://localhost:8899

祝使用愉快！🎉










